{
  "hash": "b480b1f16f3ab194c65577c262df5ab9",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Take-home Exercise 1: Geospatial Analytics for Public Good\"\nauthor: \"Tan Zong Yin Shawn\"\ndate: \"September 11, 2025\"\ndate-modified: \"last-modified\"\nexecute: \n  eval: true\n  echo: true\n  warning: false\n  freeze: true\n---\n\n\n\n# **Overview**\n\nThe locations of businesses and firms are central to urban development, influencing economic growth, job creation, and the availability of resources and services for residents and other businesses. Strategic locations provide competitive advantages, access to talent and infrastructure, and impact brand image and market positioning, while also shaping the city’s overall character and functionality by fostering specialized districts and facilitating efficient supply chains and employee commutes.\n\nStudying the spatio-temporal patterns of businesses and firms is crucial for urban development because it reveals how economic activity and urban forms evolve, enabling better urban planning, promoting sustainability, identifying urban inefficiencies, and enhancing quality of life. By understanding where and when businesses locate and operate, urban planners can design cities more effectively, anticipate growth, ensure resource efficiency, and tailor infrastructure to support economic vitality and community well-being.\n\n# **Datasets**\n\n# **Installing and Loading the R packages**\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(sf, raster, spatstat, sparr, tmap, tidyverse)\n```\n:::\n\n\n\n# Importing and Preparing the Data\n\n## **Importing the Data**\n\nThe following code chunk is used to import all the ACRA **.csv** files from the folder and combine them into a single dataset. This allows us to manage and analyze the data more efficiently within R. At the end of the code we will use *glimpse()* to have an overview of the data fields and their data type to confirm if they are in their correct format.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npath <- \"data\"\n\nfiles <- list.files(path = path, \n                    pattern = \"ACRA Information on Corporate Entities.*\\\\.csv\", \n                    full.names = TRUE)\n\nacra_data <- files %>% \n  map_dfr(~ read_csv(.x, show_col_types = FALSE))\n\nglimpse(acra_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 2,026,935\nColumns: 53\n$ uen                               <chr> \"00022100K\", \"00031800X\", \"00043100A…\n$ issuance_agency_id                <chr> \"ACRA\", \"ACRA\", \"ACRA\", \"ACRA\", \"ACR…\n$ entity_name                       <chr> \"A Y ABDUL RAHIMAN\", \"A M ABDULLAH S…\n$ entity_type_description           <chr> \"Sole Proprietorship/ Partnership\", …\n$ business_constitution_description <chr> \"Partnership\", \"Partnership\", \"Partn…\n$ company_type_description          <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ paf_constitution_description      <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ entity_status_description         <chr> \"Terminated\", \"Terminated\", \"Termina…\n$ registration_incorporation_date   <date> 1974-10-09, 1974-10-12, 1974-09-20,…\n$ uen_issue_date                    <date> 1974-10-09, 1974-10-12, 1974-09-20,…\n$ address_type                      <chr> \"LOCAL\", \"LOCAL\", \"LOCAL\", \"LOCAL\", …\n$ block                             <chr> \"51\", \"93\", \"178\", \"21\", \"30\", \"38A\"…\n$ street_name                       <chr> \"EAST COAST ROAD\", \"MARKET STREET\", …\n$ level_no                          <chr> \"na\", \"10\", \"na\", \"na\", \"na\", \"na\", …\n$ unit_no                           <chr> \"na\", \"01\", \"na\", \"na\", \"na\", \"na\", …\n$ building_name                     <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ postal_code                       <chr> \"428770\", \"0104\", \"0718\", \"0923\", \"4…\n$ other_address_line1               <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ other_address_line2               <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ account_due_date                  <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ annual_return_date                <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ primary_ssic_code                 <dbl> 47722, 46301, 68104, 56111, 47102, 6…\n$ primary_ssic_description          <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ primary_user_described_activity   <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ secondary_ssic_code               <chr> \"na\", \"32909\", \"na\", \"56122\", \"na\", …\n$ secondary_ssic_description        <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ secondary_user_described_activity <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ no_of_officers                    <dbl> 7, 6, 3, 1, 5, 2, 2, 1, 4, 2, 2, 1, …\n$ former_entity_name1               <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ former_entity_name2               <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ former_entity_name3               <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ former_entity_name4               <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ former_entity_name5               <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ former_entity_name6               <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ former_entity_name7               <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ former_entity_name8               <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ former_entity_name9               <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ former_entity_name10              <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ former_entity_name11              <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ former_entity_name12              <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ former_entity_name13              <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ former_entity_name14              <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ former_entity_name15              <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ uen_of_audit_firm1                <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ name_of_audit_firm1               <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ uen_of_audit_firm2                <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ name_of_audit_firm2               <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ uen_of_audit_firm3                <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ name_of_audit_firm3               <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ uen_of_audit_firm4                <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ name_of_audit_firm4               <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ uen_of_audit_firm5                <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n$ name_of_audit_firm5               <chr> \"na\", \"na\", \"na\", \"na\", \"na\", \"na\", …\n```\n\n\n:::\n:::\n\n\n\n## **Data Preparation**\n\n### Dropping irrelevant data fields\n\nTo streamline the dataset for analysis, we will select only the relevant fields identified through the *glimpse()* function shown above. This step ensures that we focus on the essential variables needed for our study, resulting in a cleaner and more manageable dataset.\n\nFor geocoding, location information can be derived either from the combination of **block** and **street_name** fields, or directly from the **postal_code**. To ensure data quality, we use the following code chunk to check for any missing values in these fields.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nacra_data %>%\n  filter(is.na(block) | block == \"\" |\n         is.na(street_name) | street_name == \"\" |\n         is.na(postal_code) | postal_code == \"\") %>%\n  select(uen, entity_name, block, street_name, postal_code) %>%\n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 2\nColumns: 5\n$ uen         <chr> \"53323605C\", \"53292643M\"\n$ entity_name <chr> \"HONSHIN GOLF ACADEMY\", \"ROSHALIN\"\n$ block       <chr> NA, NA\n$ street_name <chr> \"MANDAI ROAD\", \"QUEENSWAY\"\n$ postal_code <chr> \"779384\", \"149051\"\n```\n\n\n:::\n:::\n\n\n\nSince there are missing block numbers within the dataset, we will proceed to use the postal codes for geocoding. The following code chunk will be used to select the data fields we want for our dataset.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nacra_selected <- acra_data %>%\n  select(\n    uen,\n    entity_name,\n    entity_type_description,\n    entity_status_description,\n    registration_incorporation_date,\n    primary_ssic_code,\n    address_type,\n    postal_code\n  )\n\nglimpse(acra_selected)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 2,026,935\nColumns: 8\n$ uen                             <chr> \"00022100K\", \"00031800X\", \"00043100A\",…\n$ entity_name                     <chr> \"A Y ABDUL RAHIMAN\", \"A M ABDULLAH SAH…\n$ entity_type_description         <chr> \"Sole Proprietorship/ Partnership\", \"S…\n$ entity_status_description       <chr> \"Terminated\", \"Terminated\", \"Terminate…\n$ registration_incorporation_date <date> 1974-10-09, 1974-10-12, 1974-09-20, 1…\n$ primary_ssic_code               <dbl> 47722, 46301, 68104, 56111, 47102, 681…\n$ address_type                    <chr> \"LOCAL\", \"LOCAL\", \"LOCAL\", \"LOCAL\", \"L…\n$ postal_code                     <chr> \"428770\", \"0104\", \"0718\", \"0923\", \"439…\n```\n\n\n:::\n:::\n\n\n\n### Dropping Irrelevant Records\n\nFor this exercise, we will be looking at the following trades using the SICC classification:\n\n-   47- Retail Trade\n\n-   56 - Food and Beverage Service Activities\n\n-   86 - Health Services\n\nThe following code chunk will be used to filter and leave the above mentioned types of businesses within our dataset.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nacra_ssic <- acra_selected %>%\n  filter(str_starts(primary_ssic_code, \"47\") |\n         str_starts(primary_ssic_code, \"56\") |\n         str_starts(primary_ssic_code, \"86\"))\n\nglimpse(acra_ssic)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 337,860\nColumns: 8\n$ uen                             <chr> \"00022100K\", \"00043800J\", \"00063200K\",…\n$ entity_name                     <chr> \"A Y ABDUL RAHIMAN\", \"AI HOU KEE ORIEN…\n$ entity_type_description         <chr> \"Sole Proprietorship/ Partnership\", \"S…\n$ entity_status_description       <chr> \"Terminated\", \"Cancelled\", \"Cancelled\"…\n$ registration_incorporation_date <date> 1974-10-09, 1974-09-25, 1974-10-21, 1…\n$ primary_ssic_code               <dbl> 47722, 56111, 47102, 47230, 56111, 471…\n$ address_type                    <chr> \"LOCAL\", \"LOCAL\", \"LOCAL\", \"LOCAL\", \"L…\n$ postal_code                     <chr> \"428770\", \"0923\", \"439561\", \"0718\", \"0…\n```\n\n\n:::\n:::\n\n\n\nWe want to only have the records of business entities registered between 1st January 2024 to 30th June 2026. Before we filter, it is good practice to check the data type. The following code chunk will be used to check the data type.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclass(acra_ssic$registration_incorporation_date)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Date\"\n```\n\n\n:::\n:::\n\n\n\nAfter confirming the data type, we can proceed to filter the records.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nacra_filtered <- acra_ssic %>%\n  filter(registration_incorporation_date >= as.Date(\"2024-01-01\") &\n         registration_incorporation_date <= as.Date(\"2025-06-30\"))\n\nglimpse(acra_filtered)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 16,944\nColumns: 8\n$ uen                             <chr> \"202400088M\", \"202400369C\", \"202400511…\n$ entity_name                     <chr> \"AEMN GROUP PTE. LTD.\", \"AVENUE OF BRA…\n$ entity_type_description         <chr> \"Local Company\", \"Local Company\", \"Loc…\n$ entity_status_description       <chr> \"Live Company\", \"Live Company\", \"Live …\n$ registration_incorporation_date <date> 2024-03-13, 2024-01-02, 2024-01-03, 2…\n$ primary_ssic_code               <dbl> 47220, 56122, 86201, 56111, 47219, 561…\n$ address_type                    <chr> \"LOCAL\", \"LOCAL\", \"LOCAL\", \"LOCAL\", \"L…\n$ postal_code                     <chr> \"49909\", \"349585\", \"408564\", \"208511\",…\n```\n\n\n:::\n:::\n\n\n\n# References\n\n-   [Kam, T. S. Geospatial Data Science with R. R for Geospatial Data Science and Analytics](https://isss626-ay2025-26aug.netlify.app/take-home_ex01)\n-   [SSIC: Singapore Standard Industrial Classification](https://classification.codes/classifications/industry/ssic-singapore#version_1_singapore-standard-industrial-classification-ssic-2020)\n-   [Sleek.com - SSIC (Primary and Secondary)](https://sleek.com/sg/resources/ssic-codes-guide/)\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}